<!doctype html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Posted</title>
<style>
  html { height: 100%; align-content: center; }
  h1 { text-align: center; }
  body { margin: 0 auto; width: 15em; }
  .hidden { display: none; }
  form { display: flex; flex-direction: column; }
</style>

<h1>Posted</h1>

<form class="hidden" method="GET" action="">
  <p>Edits allowed for 5m after last change. Total edits left: <span>?</span>.</p>
  <input type="submit" value="Edit">
</form>

<script type="module">
  let form = document.querySelector('form')
  let url = new URL(window.location.href)
  let from = url.searchParams.get('from')
  let edits = parseInt(url.searchParams.get('edits')) || 0

  form.querySelector('p span').innerText = edits
  if (from) form.action = from
  if (from && edits > 0) form.classList.remove('hidden')
</script>
